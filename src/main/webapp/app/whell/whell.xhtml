<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">

<h:head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<title>ROLETA</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<h:outputScript library="primefaces" name="jquery/jquery.js" target="head" />
	<script src="/rino/resources/js/bootstrap.min.js"></script>
	<script src="/rino/resources/js/propeller.js"></script>
	<script src="/rino/resources/js/whell.js"></script>
	
	<link rel="stylesheet" href="/rino/resources/css/whell.css" />
	<link rel="stylesheet" href="/rino/resources/css/bootstrap.min.css" />
</h:head>

<f:event listener="#{jogadasBean.selecionarBrinde()}" type="preRenderView" />

<h:body>

<h:panelGroup rendered="${jogadasBean.jogadas!=null}">
	<div style="background-color:#ffffff">
		<div>Prêmio:<h:graphicImage value="/uploads/images/#{jogadasBean.jogadas.nomeImagem}" width="20"/></div>
		<div>Angulo Inicial:<h:outputText value="#{jogadasBean.jogadas.anguloInicial}" />, Angulo Final<h:outputText value="#{jogadasBean.jogadas.anguloFinal}" /></div>
	</div>
        
	<div class="pieContainer">
	<div class="pieBackground"></div>
	<div id="pieSlice1" class="hold">
	<div class="pie"></div>
	</div>
	<div id="pieSlice2" class="hold">
	<div class="pie"></div>
	</div>
	</div>

	<div class="container">
	<div class="container-led">
	<div id="led-outer-1" class="led"
		style="margin-top:0px;margin-left:120px"></div>
	<div id="led-outer-2" class="led"
		style="margin-top:100px;margin-left:40px"></div>
	<div id="led-outer-3" class="led" style="margin-top:200px"></div>
	<div id="led-outer-4" class="led" style="margin-top:340px"></div>
	<div id="led-outer-5" class="led"
		style="margin-top:440px;margin-left:40px"></div>
	<div id="led-outer-6" class="led"
		style="margin-top:540px;margin-left:120px"></div>
	</div>
	<div class="container-led-mini">
	<div id="led-inner-1" class="led"
		style="margin-top:15px;margin-left:245px"></div>
	<div id="led-inner-2" class="led"
		style="margin-top:42px;margin-left:175px"></div>
	<div id="led-inner-3" class="led"
		style="margin-top:135px;margin-left:80px"></div>
	<div id="led-inner-4" class="led"
		style="margin-top:200px;margin-left:50px"></div>
	<div id="led-inner-5" class="led"
		style="margin-top:336px;margin-left:50px"></div>
	<div id="led-inner-6" class="led"
		style="margin-top:405px;margin-left:80px"></div>
	<div id="led-inner-7" class="led"
		style="margin-top:498px;margin-left:175px"></div>
	<div id="led-inner-8" class="led"
		style="margin-top:525px;margin-left:245px"></div>
	</div>
	<div class="container-whell">
	<div class="ponteira"></div>
	<div class="whell-static">
	<div class="whell-logo"></div>
	<div class="whell-ghost">
	<div class="whell">
	<div style="float:left;border:0px solid red;width:49%;height:100px">
	
	<ui:repeat var="data" value="#{whellBean.listWhellGroupOne()}" varStatus="status">
			<h:graphicImage url="/uploads/images/#{data.nomeImagem}" styleClass="#{'img'.concat(status.index + 1)}"
							width="50" />
	</ui:repeat>
	
	</div>
	<div
		style="float:left;border:0px solid red;width:49%;width:49%;height:100px">
		
		<ui:repeat var="data" value="#{whellBean.listWhellGroupTwo()}" varStatus="status">
			<h:graphicImage url="/uploads/images/#{data.nomeImagem}" styleClass="#{'img'.concat(status.index + 5)}"
							width="50"/>
	</ui:repeat>

	</div>

	</div>
	</div>
	</div>
	</div>
	<div class="container-led-mini">
	<div id="led-inner-9" class="led"
		style="margin-top:15px;margin-left:-280px"></div>
	<div id="led-inner-10" class="led"
		style="margin-top:42px;margin-left:-205px"></div>
	<div id="led-inner-11" class="led"
		style="margin-top:135px;margin-left:-110px"></div>
	<div id="led-inner-12" class="led"
		style="margin-top:200px;margin-left:-82px"></div>
	<div id="led-inner-13" class="led"
		style="margin-top:336px;margin-left:-80px"></div>
	<div id="led-inner-14" class="led"
		style="margin-top:405px;margin-left:-108px"></div>
	<div id="led-inner-15" class="led"
		style="margin-top:498px;margin-left:-205px"></div>
	<div id="led-inner-16" class="led"
		style="margin-top:525px;margin-left:-275px"></div>
	</div>
	<div class="container-led">
	<div id="led-outer-7" class="led"
		style="margin-top:0px;margin-left:-120px"></div>
	<div id="led-outer-8" class="led"
		style="margin-top:100px;margin-left:-40px"></div>
	<div id="led-outer-9" class="led" style="margin-top:200px"></div>
	<div id="led-outer-10" class="led" style="margin-top:340px"></div>
	<div id="led-outer-11" class="led"
		style="margin-top:440px;margin-left:-40px"></div>
	<div id="led-outer-12" class="led"
		style="margin-top:540px;margin-left:-120px"></div>
	</div>
	</div>
	<br />
	<br />
	<br />
	<br />
	<br />
	<br />
	<div class="container-winner">
	<div class="container-winner-led-horizontal">
	<div data-id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	</div>
	<div class="container-winner-led-middle">
	<div id="led-winner-1" class="led-off-mini" style="margin-top:10px"></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	</div>
	<div class="container-winner-content">
	<div class="container-winner-ganhou" style="height:60px;width:280px"></div>
	<div class="container-winner-produto"></div>
	</div>
	<div class="container-winner-led-middle">
	<div id="led-winner-1" class="led-off-mini" style="margin-top:10px"></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	</div>
	<div class="clearfix"></div>
	<div class="container-winner-led-horizontal">
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	<div id="led-winner-1" class="led-off-mini" style=""></div>
	</div>
	</div>



	<script> 
	powerLed("led-inner-1",2000)
	powerLed("led-inner-2",2000) 
	powerLed("led-inner-3",2000)
	powerLed("led-inner-4",2000) 
	powerLed("led-inner-5",2000)
	powerLed("led-inner-6",2000) 
	powerLed("led-inner-7",2000)
	powerLed("led-inner-8",2000) 
	powerLed("led-inner-9",2000)
	powerLed("led-inner-10",2000) 
	powerLed("led-inner-11",2000)
	powerLed("led-inner-12",2000) 
	powerLed("led-inner-13",2000)
	powerLed("led-inner-14",2000) 
	powerLed("led-inner-15",2000)
	powerLed("led-inner-16",2000) 
	powerLed("led-outer-1",1000)
	powerLed("led-outer-2",1000) 
	powerLed("led-outer-3",1000)
	powerLed("led-outer-4",1000) 
	powerLed("led-outer-5",1000)
	powerLed("led-outer-6",1000) 
	powerLed("led-outer-7",1000)
	powerLed("led-outer-8",1000) 
	powerLed("led-outer-9",1000)
	powerLed("led-outer-10",1000) 
	powerLed("led-outer-11",1000)
	powerLed("led-outer-12",1000) 
	
	var ROLETA = $('.whell-ghost').propeller(
		{
		minimalSpeed:0, 
		inertia: 0.99, 
		speed: 0, 
		angle: 0, 
		angleInit: <h:outputText value="#{jogadasBean.jogadas.anguloInicial}" />, 
		angleEnd: <h:outputText value="#{jogadasBean.jogadas.anguloFinal}" />, 
		onStop: function(){
			retiraPremio("<h:outputText value="#{jogadasBean.jogadas.codJogadas}" />", "<h:outputText value="#{jogadasBean.jogadas.codRoleta}" />"); }, 
			onRotate: function(){

<ui:repeat var="data" value="#{whellBean.listWhellGroupOne()}" varStatus="status" escape="true">
	randomImageSelect(this.angle, #{data.anguloInicial}, #{data.anguloFinal}, "#{data.nomeImagem}");	
	</ui:repeat>
	<ui:repeat var="data" value="#{whellBean.listWhellGroupTwo()}" varStatus="status" escape="true">
	randomImageSelect(this.angle, #{data.anguloInicial}, #{data.anguloFinal}, "#{data.nomeImagem}");	
	</ui:repeat>
 
}}); 
	
	function retiraPremio(codJogada, codRoleta){ 
		//console.log("chamou a função retiraPremio"); 
		
		//console.log("codJogada: "+codJogada+", codRoleta: "+codRoleta);
		
		var imagemEscolhida = "<h:outputText value="#{jogadasBean.jogadas.nomeImagem}" />";

		if(imagemEscolhida.indexOf("nao") == -1){
			$('.container-winner-ganhou').html('<div class="div-ganhou"></div>'); 
			powerGanhou("div-ganhou", 500) 
		}

		powerLedPremio("led-off-mini", 1000); 

		endWhell(codJogada, imagemEscolhida);
		
		
// 		$.ajax({ 
// 			method: "POST", 
// 			url: "/roleta/bin/retiraPremio.php", 
// 			data: { 
// 				cod_jogada: codJogada,
// 				cod_roleta: codRoleta 
// 				}, 
// 			success: function(success){
// 				console.log("sucesso"); 
// 				setTimeout(function(){ 
// 					location = "/roleta/obrigado.html"; 
// 				},5000); 
// 			}, 
// 			error: function(error){
// 				alert("erro"); 
// 				console.log("erro"); 
// 			} 
// 		}) 
	} 
	function powerGanhou(element, time){ 
		setInterval(function() {
			if($('.'+element).css("background-image").indexOf("ganhou_of.png") != -1){
				$('.'+element).css("background-image","url(/rino/resources/images/ganhou_on.png)");
			}else{
				$('.'+element).css({'background-image':'url(/rino/resources/images/ganhou_of.png)'}); 
			}
		},time); 
	} 
	
	function powerLedPremio(element, time){
		setInterval(function() {
			if($('.'+element).css("background-image").indexOf("led1-of.png") != -1){ 
				$('.'+element).css("background-image","url(/rino/resources/images/led1-on.png)");
			}else{
				$('.'+element).css({'background-image':'url(/rino/resources/images/led1-of.png)'}); 
			}
		},time); 
	} 
	
	function powerLed(element, time){ 
		setInterval(function() {
			if($('#'+element).css("background-image").indexOf("led1-of.png") != -1){ 
				$('#'+element).css("background-image","url(/rino/resources/images/led1-on.png)");
			}else{
				$('#'+element).css({'background-image':'url(/rino/resources/images/led1-of.png)'}); 
			}
		},time); 
	} 
	
	$(".whell-logo").click(function(){
		ROLETA.speed = 100; 
	})
	
	</script>
</h:panelGroup>
<h:panelGroup rendered="${jogadasBean.jogadas==null}">
<div class="well well-sm" style="margin:100px auto 0 auto;font-size:25px;width:600px;text-align:center">
	Ops, será necessário configurar as jogadas!
</div>
</h:panelGroup>
</h:body>
</html>